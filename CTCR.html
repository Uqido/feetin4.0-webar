<!DOCTYPE html>
<html lang="en" class="fullscreen-100">

<head>
    <meta charset="utf-8">
    <title>CTCR</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/quiz.css">
    <link rel="stylesheet" href="css/hotspots.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="white" />
    <meta name="description" content="">
    <link rel="icon" type="image/png" href="favicon-uqido.png">

    <script src="https://unpkg.com/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

    <script src="https://unpkg.com/intersection-observer/intersection-observer.js"></script>

    <script src="https://unpkg.com/resize-observer-polyfill/dist/ResizeObserver.js"></script>

    <script src="https://unpkg.com/fullscreen-polyfill/dist/fullscreen.polyfill.js"></script>

    <script src="https://unpkg.com/focus-visible/dist/focus-visible.js" defer></script>

    <script src="js/i18n/banana-i18n.js"></script>

    <script src="js/page-config.js"></script>

    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" data-auto-a11y="true"></script>
</head>

<body class="fullscreen-100">
    <div class="fullscreen-100" style="display:flex; flex-direction: column;">
        <div id="model-viewer-container" class="viewer">
            <model-viewer id="modelViewer" class='model-viewer' ar autoplay camera-controls min-field-of-view="60deg" max-field-of-view="60deg" src='models/CTCR.glb' ios-src='models/CTCR.usdz' alt='' noloop camera-orbit="-30deg 55deg 60%"
                min-camera-orbit="auto 10deg 180%" max-camera-orbit="auto 90deg 190%" ar-modes="scene-viewer webxr quick-look" exposure="1" shadow-intensity="1.5" shadow-softness="0.8" quick-look-browsers="safari chrome">
                <script src="js/LoadingBar.js"></script>
                 <div id="hotspot-PowerOn1" style="width: 24px;height: 24px" slot="hotspot-PowerOn1" data-position="0.01 0.03 0.04" data-normal="0.00 1.00 0.00" data-visibility-attribute="visible" onclick="onPinClick('hotspot-PowerOn1')">
    <div data-i18n="hotspot-PowerOn1" class="hotspot-pin-text text-white hotspot-content">
        Power On Switch Number 1: The user must turn on the PDA incorporated in the gun and it will be able to use the application that will be interconnected with the ERP to be able to transmit the readings.
    </div>
    <div class="hotspot-pin">
    </div>
    <!-- dot -->
    <div class="pulse outer"></div>
    <!-- pulse outer -->
    <div class="pulse mid"></div>
    <!-- pulse mid -->
    <div class="pulse inner"></div>
    <!-- pulse inner -->
</div> <div id="hotspot-PowerOn2" style="width: 24px;height: 24px" slot="hotspot-PowerOn2" data-position="0.06 0.06 -0.04" data-normal="0.00 1.00 0.00" data-visibility-attribute="visible" onclick="onPinClick('hotspot-PowerOn2')">
    <div data-i18n="hotspot-PowerOn2" class="hotspot-pin-text text-white hotspot-content">
        Power On Switch Number 2: In order to be able to switch on completely, the user must switch on and check that both devices have battery power, both the PDA and the RFID Gun.
    </div>
    <div class="hotspot-pin">
    </div>
    <!-- dot -->
    <div class="pulse outer"></div>
    <!-- pulse outer -->
    <div class="pulse mid"></div>
    <!-- pulse mid -->
    <div class="pulse inner"></div>
    <!-- pulse inner -->
</div> <div id="hotspot-Trigger" style="width: 24px;height: 24px" slot="hotspot-Trigger" data-position="0.02 0.00 0.00" data-normal="0.00 1.00 0.00" data-visibility-attribute="visible" onclick="onPinClick('hotspot-Trigger')">
    <div data-i18n="hotspot-Trigger" class="hotspot-pin-text text-white hotspot-content">
        Trigger: The user must activate it to start a remote reading of the RFID tags (Transponders) that are placed on the object that we want to identify / locate, in this case a shoe.
    </div>
    <div class="hotspot-pin">
    </div>
    <!-- dot -->
    <div class="pulse outer"></div>
    <!-- pulse outer -->
    <div class="pulse mid"></div>
    <!-- pulse mid -->
    <div class="pulse inner"></div>
    <!-- pulse inner -->
</div> <div id="hotspot-PDA" style="width: 24px;height: 24px" slot="hotspot-PDA" data-position="0.00 0.08 0.00" data-normal="0.00 1.00 0.00" data-visibility-attribute="visible" onclick="onPinClick('hotspot-PDA')">
    <div data-i18n="hotspot-PDA" class="hotspot-pin-text text-white hotspot-content">
        PDA: Its main function is to display the information of tags read in real time, you can perform various tasks such as the location of a specific tag, or as the high-speed inventory of a warehouse, or custom applications that connect to the customer's ERP and display information from it.
    </div>
    <div class="hotspot-pin">
    </div>
    <!-- dot -->
    <div class="pulse outer"></div>
    <!-- pulse outer -->
    <div class="pulse mid"></div>
    <!-- pulse mid -->
    <div class="pulse inner"></div>
    <!-- pulse inner -->
</div> <div id="hotspot-Antenna" style="width: 24px;height: 24px" slot="hotspot-Antenna" data-position="0.08 -0.04 0.00" data-normal="0.00 1.00 0.00" data-visibility-attribute="visible" onclick="onPinClick('hotspot-Antenna')">
    <div data-i18n="hotspot-Antenna" class="hotspot-pin-text text-white hotspot-content">
        Antenna: It is the part of the gun in charge of launching the radio signals to the tags. Since it is a directional antenna, it is recommended to point the antenna towards the tags to be read in order to obtain a better reading.
    </div>
    <div class="hotspot-pin">
    </div>
    <!-- dot -->
    <div class="pulse outer"></div>
    <!-- pulse outer -->
    <div class="pulse mid"></div>
    <!-- pulse mid -->
    <div class="pulse inner"></div>
    <!-- pulse inner -->
</div> 
<div id="viewer-bottom" class="viewer-bottom">
    <div id="move_camera" onclick="rotateCamera()" class="clickable"
        style="background-image: url(img/Move.png);"></div>
    <div id="animate" onclick="model_Animate()" class="clickable"
        style="background-image: url(img/Animate.png);"></div>
</div>
<script>
    const hideAndDisablePin = function () {
        for (let annotation of window.annotations) {
            annotation.classList.add("hide-child");
            annotation.classList.remove("hide-pulse");
        }

        for (let annotation of window.annotations) {
            annotation.style.display = "none"
        }
    }

    const showAndEnablePin = function () {

        for (let annotation of window.annotations) {
            annotation.style.display = "block"
        }
    }


    let is_Open = false;

    function model_Animate() {
        console.log("animate")
        console.log(modelViewer.paused)
        if (modelViewer.paused) {
            if (is_Open) {
                modelViewer.animationName = "Idle";
                modelViewer.animationName = "Animation";
                hideAndDisablePin()
                is_Open = false;
                const interval = setInterval(() => {
                    if (modelViewer.paused) {
                        clearInterval(interval);
                        showAndEnablePin();
                    }
                }, 500);
            } else {
                modelViewer.animationName = "Idle";
                modelViewer.animationName = "Animation";
                hideAndDisablePin()
                is_Open = true;
                const interval = setInterval(() => {
                    if (modelViewer.paused) {
                        clearInterval(interval);
                        showAndEnablePin();
                    }
                }, 500);
            }
            modelViewer.play();
        }
    }

    document.addEventListener("page-configured", function (e) {
        console.log("page configured!")
        window.forceNoIframe = true;
        window.forceAnnotations = true;

        const annotations = window.hotspotsId.map((elem) => document.getElementById(elem));

        annotations.forEach((element) => {
            element.style.display = "none";
        })

        modelViewer.addEventListener('load', () => {
            annotations.forEach((element) => {
                element.style.display = "block";
            })
        });

        window.annotations = annotations
    });
</script>
<script src="js/ContentCustomizer.js"></script>
<script>
    document.addEventListener("page-configured", function (e) {

        for (let annotation of window.annotations) {
            annotation.classList.add("hide-child");
        }
        window.onPinClick = function (annotationID) {

            const item = document.getElementById(annotationID);

            if (!item.classList.contains("hide-child")) {
                //it was already opened! closing
                for (let annotation of annotations) {
                    annotation.classList.add("hide-child");
                    annotation.classList.remove("hide-pulse");
                }
                return;
            }

            for (let annotation of annotations) {
                annotation.classList.add("hide-child");
                annotation.classList.remove("hide-pulse");
            }

            item.classList.remove("hide-child")
            item.classList.add("hide-pulse")
        }

    })
</script>
            </model-viewer>
        </div>
        <div class="quiz">
            <div id="quiz">
                <div id="question" class="custom-title">
                </div>
                <div style=" display: grid; grid-template-columns: 2fr 2fr">
                    <div style="grid-column-start: 1" class="answer-grid-cell">
                        <div id="answer-1" class="answer-card" onclick="onAnswerClick(0)">
                        </div>
                    </div>
                    <div style="grid-column-start: 2" class="answer-grid-cell">
                        <div id="answer-2" class="answer-card" onclick="onAnswerClick(1)">
                        </div>
                    </div>
                    <div style="grid-column-start: 1; grid-row-start: 2" class="answer-grid-cell">
                        <div id="answer-3" class="answer-card" onclick="onAnswerClick(2)">
                        </div>
                    </div>
                    <div style="grid-column-start: 2; grid-row-start: 2" class="answer-grid-cell">
                        <div id="answer-4" class="answer-card" onclick="onAnswerClick(3)">
                        </div>
                    </div>
                </div>
            </div>
            <div id="recap" style="display: none">
                <div class="custom-title">
                    Session Recap
                </div>
                <div id="recap-message" class="recap-message">
                </div>
                <div class="restart-card answer-card" onclick="restartQuiz()">
                    Restart
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="js/model-viewer/dist/1.8.0/model-viewer.min.js"></script>
    <script src="js/quiz.js"></script>
</body>

</html>